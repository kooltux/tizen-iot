/*
 * Controller for handling all actions related to event
 *
 */

var log4js=require("log4js");
var logger=log4js.getLogger("event");
var net=require('net');

module.exports = function(app,prefix) {
	var wwwserv=this; // wwwserver instance
	
	// initialize target list
	var EVENTS=[];

	// declare routes on express app
	app.get(prefix+'state',function(req,res) {
		res.json(EVENTS);
	});
	
	app.get(prefix+'post/:x/:y/:state',function(req,res) {
		var evt={
			x: req.params.x,
			y: req.params.y,
			state: req.params.state
		};

		EVENTS.push(evt);
		while (EVENTS.length>20) {	
			EVENTS.shift();
		}

		res.end("OK");
	});
};
